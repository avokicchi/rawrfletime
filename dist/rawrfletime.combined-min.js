!function(t){t.fn.rawrfletime=function(e,i){var n=this;if(n.closePicker=function(){this.$pickerHolder.hide(),document.removeEventListener("mousedown",this.clickListener)},n.openPicker=function(){var e=this;this.$pickerHolder.is(":visible")||(null!==this.inputTime?this.pickerTime=moment(this.inputTime):this.pickerTime=moment(),n.updatePopup.call(e),null!==this.inputTime&&console.warn("picker is open, input time is currently ",this.inputTime.format("HH:mm")),console.warn("picker is open, picker time is currently ",this.pickerTime.format("HH:mm")),this.$pickerHolder.show(),this.clickListener=function(i){t(i.target).hasClass("rawrfle-picker")||t(i.target).closest(".rawrfle-picker").length>0||n.closePicker.call(e)},window.addEventListener("mousedown",this.clickListener),this.$pickerHolder.position({my:"left top",at:"left bottom",of:e,within:this.settings.constraint}))},n.updateInput=function(){console.log("plugin.updateInput"),this.inputTime=moment(this.pickerTime),this.value=this.inputTime.format(this.settings.displayFormat)},n.updatePickerTime=function(){if(console.log("plugin.updateInput"),!t(this).hasClass("suppress-changes")){var e=this.$pickerHolder.find("input[name=hours]").val();e=("0"+e).slice(-2);var i=this.$pickerHolder.find("input[name=minutes]").val();if(i=("0"+i).slice(-2),1==this.settings["24hours"])var s=e+":"+i,r=moment(s,"HH:mm");else s=e+":"+i+" "+this.$pickerHolder.find("select[name=ampm]").val(),r=moment(s,"hh:mm a");r.isValid()?(this.pickerTime=r,n.updatePopup.call(this)):(console.warn("you're entering rubbish!"),n.updatePopup.call(this))}},n.updatePopup=function(){console.log("plugin.updatePopup"),t(this).addClass("suppress-changes"),1==this.settings["24hours"]?(this.$pickerHolder.find("input[name=hours]").val(this.pickerTime.format("HH")),this.$pickerHolder.find("input[name=minutes]").val(this.pickerTime.format("mm"))):(this.$pickerHolder.find("input[name=hours]").val(this.pickerTime.format("hh")),this.$pickerHolder.find("input[name=minutes]").val(this.pickerTime.format("mm")),this.$pickerHolder.find("select[name=ampm]").val(this.pickerTime.format("A"))),t(this).removeClass("suppress-changes")},"get"===e){var s=this[0];return t(s).hasClass("active-rawrfletime")?null==s.inputTime?null:s.inputTime.isValid()?s.inputTime.format(s.settings.valueFormat):null:(console.error("The element you are running this command on is not a rawrfletime picker."),!1)}if("set"!==e)return this.each(function(){var i=this;if("destroy"===e){if(!t(i).hasClass("active-rawrfletime"))return console.error("The element you are running this command on is not a rawrfletime picker."),!1;t(i).off("focus.rawrfletime"),t(i).removeClass("active-rawrfletime")}else if("close"===e){if(!t(i).hasClass("active-rawrfletime"))return console.error("The element you are running this command on is not a rawrfletime picker."),!1;n.closePicker.call(i)}else if("object"==typeof e||void 0===e){if(t(i).hasClass("active-rawrfletime"))return!1;i.className=i.className+" active-rawrfletime",i.pickerTime=null,i.inputTime=null;var s={"24hours":!0,displayFormat:"HH:mm",valueFormat:"HH:mm",constraint:window};if("object"==typeof e&&(s=Object.assign(s,e)),i.settings=s,""!==i.value){if(1==i.settings["24hours"])var r=moment(i.value,"HH:mm");else r=moment(i.value,"hh:mm A");r.isValid()&&(i.pickerTime=r,n.updateInput.call(i))}i.$pickerHolder=t('<div class=\'rawrfle-picker\' style=\'position:absolute;background:#fff;border-bottom-right-radius: 5px;    border-bottom-left-radius: 5px;z-index:999;background:fff;width:auto;display:flex;padding:15px;box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.1);\'>\n\t\t\t\t\t\t<div style="position:absolute;width: 0; height: 0;  border-left: 8px solid transparent; border-right: 8px solid transparent;border-bottom: 8px solid #eee;margin-top:-23px;"></div>\n\t\t\t\t\t\t<div style="display:flex;flex-direction:column;margin-right:5px;">\n\t\t\t\t\t\t\t<a class="btn btn-default up btn-raised"><i class="mdi mdi-chevron-up"></i></a>\n\t\t\t\t\t\t\t<input type=\'text\' class="form-control" inputmode=\'numeric\' name="hours" style=\'width:50px;\'/>\n\t\t\t\t\t\t\t<a class="btn btn-default down btn-raised"><i class="mdi mdi-chevron-down"></i></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style="display:flex;flex-direction:column;margin-right:5px;">\n\t\t\t\t\t\t\t<a class="btn btn-default up btn-raised"><i class="mdi mdi-chevron-up"></i></a>\n\t\t\t\t\t\t\t<input type=\'text\' class="form-control" inputmode=\'numeric\' name="minutes" style=\'width:50px;\'/>\n\t\t\t\t\t\t\t<a class="btn btn-default down btn-raised"><i class="mdi mdi-chevron-down"></i></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style="display:flex;flex-direction:column;margin-right:5px;">\n\t\t\t\t\t\t\t<a class="btn btn-default" style="visibility:hidden;"><i class="mdi mdi-chevron-up"></i></a>\n\t\t\t\t\t\t\t<select class="form-control" name="ampm" style="margin-top: -2px;">\n\t\t\t\t\t\t\t\t<option value="AM">AM</option>\n\t\t\t\t\t\t\t\t<option value="PM">PM</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style="display:flex;flex-direction:column;align-content:flex-end;margin-left:5px">\n\t\t\t\t\t\t<span style="flex:1;"></span>\n\t\t\t\t\t\t<a class="btn btn-sm btn-secondary btn-raised today" style="margin-bottom:5px;height:24px;line-height:15px;"><i class="mdi mdi-clock-outline"></i></a>\n\t\t\t\t\t\t<a class="btn btn-sm btn-primary btn-raised check" style="height:24px;line-height:15px;color:#fff;"><i class="mdi mdi-check"></i></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'),i.$pickerHolder.appendTo(t(document.body)),1==this.settings["24hours"]&&i.$pickerHolder.find("select[name=ampm]").hide(),i.$pickerHolder.find("input[name=hours],input[name=minutes],select[name=ampm]").on("change.rawrfletime",function(){n.updatePickerTime.call(i)}),i.$pickerHolder.find(".up:first").on("click",function(){null!==this.pickerTime&&(i.pickerTime.add(1,"hours"),n.updatePopup.call(i))}),i.$pickerHolder.find(".up:last").on("click",function(){null!==this.pickerTime&&(i.pickerTime.add(1,"minutes"),n.updatePopup.call(i))}),i.$pickerHolder.find(".down:first").on("click",function(){null!==this.pickerTime&&(i.pickerTime.subtract(1,"hours"),n.updatePopup.call(i))}),i.$pickerHolder.find(".down:last").on("click",function(){null!==this.pickerTime&&(i.pickerTime.subtract(1,"minutes"),n.updatePopup.call(i))}),i.$pickerHolder.find(".check").on("click",function(){n.updateInput.call(i),n.closePicker.call(i);var e=null;null!==i.inputTime&&i.inputTime.isValid()&&(e=i.inputTime.format(i.settings.valueFormat)),t(i).trigger("set.rawrfletime",[e,i.inputTime])}),i.$pickerHolder.find(".today").on("click",function(){i.pickerTime=moment(),n.updatePopup.call(i)}),i.$pickerHolder.hide(),i.plugin=n,t(i).on("focus.rawrfletime",function(){n.openPicker.call(i),t("input").blur()})}}),this;s=this[0];if(!t(s).hasClass("active-rawrfletime"))return console.error("The element you are running this command on is not a rawrfletime picker."),!1;if(1==s.settings["24hours"])var r=moment(i,"HH:mm");else r=moment(i,"hh:mm A");r.isValid()&&(s.pickerTime=r,n.updateInput.call(s))}}(jQuery);